# 1Day合宿用PWAアプリ 要件定義書（SSV 1Day Power & Movement Camp）

- 作成日: 2026-01-11  
- 版数: v0.2（ドラフト）  
- 対象: 「プロアスリート伴走型 1Dayパワー＆ムーブメント合宿」を円滑に運営し、**講義（メンタル/セルフコンディショニング） → 測定 → 実戦＋データ活用 → 個別フィードバック**までを一気通貫で支援するPWA（Progressive Web App）を新規開発するための要件定義  
- 参照資料: 本書末尾「参照資料」参照  

---

## 1. 背景・目的

### 1.1 背景（現状課題）
本合宿プログラムは以下で構成される（実施順序はイベントにより変動）。

- **講義・メンタルセット**  
  - マインドフルネス講義（Upmind）  
  - 食事（弁当：CLUBHOUSE）  
  - 【選択式】栄養学（アスケン）／睡眠学（ブレインスリープ）／メンタル（アップマインド）／実践：セルフケアワーク
- **ウォーミングアップ＋フィジカル測定（並行実施）**  
  - 動作解析＆改善提案（Photon Sports）  
  - ジャンプ・パワー測定（Hawkin Dynamics）
- **実戦＋データ活用**  
  - 紅白戦 or 第一生命サッカー部との試合  
  - GPS（PlayerData）＋AIカメラ（例：NTT SPORTICT）
- **試合後フォロー**  
  - 疲労度チェック  
  - 映像分析デモ  
  - 個人別フィードバックレポート＆データ提供

上記のように、**複数の測定・データサービス**と、当日運営（受付・導線・順番管理・講義配布・結果共有）が密結合である一方、現状は「機器/サービスごとに別アプリ・別クラウド」「共有が人力」「当日の体験価値が運営品質に依存」という分断が起こりやすい。  

また、育成年代の選手・指導者の文脈では、次のPainが強い。

- 選手: 「怪我が続く原因が分からない」「伸びない理由が分からない」「努力が正しいか不安」  
- 指導者: 「事故が出れば監督責任」「結果が出ないプレッシャー」「科学的根拠不足の不安」  
- 企業: 「実証フィールド不足」「導入導線不足」  

これらは、当日の“体験”を**その場で理解できる可視化**と**次のアクションへの接続**に落とす設計が必要であることを示す。

### 1.2 目的（To-Be）
PWAとして提供することで、参加者のスマホに**インストール不要で即日提供**し、当日の進行・データ回収・配布・同意管理を**単一の体験**に統合する。

- 運営側: 受付〜測定〜実戦〜フィードバック配布までの作業を標準化し、人的コストとミスを削減
- 参加者（選手）: 「今日の結果」「弱点」「次のアクション」がその場/翌日には理解できる
- 指導者: チーム全体と個別の課題を可視化し、説明責任（保護者/学校）に耐えるアウトプットを得る
- パートナー企業: 実証フィールド運用を阻害しない形で、必要データと導入導線を確保する

---

## 2. スコープ

### 2.1 対象（本PWAが担う）
- 合宿イベント（1日）における以下の業務支援
  - 参加者登録（当日参加/事前登録）、同意取得、問診（任意）
  - 当日タイムテーブルの提示、集合/移動/開始の通知
  - 受付・出欠・グルーピング・順番管理（測定/実戦）
  - 測定結果の収集（**連携または手入力**）、可視化、暫定フィードバック
  - 講義コンテンツ配布（栄養/睡眠/メンタル/セルフケアの**選択式**）
  - 実戦（紅白戦/対外試合）の記録、GPS/映像データへのアクセス導線
  - 個人別フィードバックレポートの生成/配布、データ提供（DL/共有リンク）
- 合宿を起点とした「継続支援」への導線（任意・次フェーズ）
  - 次回測定の案内、継続プログラム/施設利用への誘導
  - “SSVスコア（指数）”など統合指標の提示（将来）

### 2.2 対象外（本件では実装しない）
- Photon Sports / Hawkin Dynamics / PlayerData の**計測そのもの**（各ベンダーの計測アプリ・ハードを使用）
- 医療診断・治療に該当する機能（医療機器プログラム相当）
- 決済（初期は対象外。必要な場合は別要件で定義）
- 本格的なデータサイエンス（怪我予兆モデル等）は将来拡張

---

## 3. 想定利用者・ステークホルダー

### 3.1 ユーザーロール
- **参加者（選手）**: 自分の当日スケジュール確認、自己入力（体調等）、結果閲覧、講義視聴、レポート受領
- **指導者（コーチ/顧問）**: チーム一覧/出欠、チーム集計、レポート閲覧（許諾範囲内）
- **運営スタッフ（SSV）**: イベント作成、受付、グループ/順番管理、データ取り込み、配布
- **測定担当（各機器オペレーター）**: セッション紐付け、結果連携、当日確認
- **管理者（Admin）**: 権限管理、マスタ管理、監査ログ、データエクスポート

### 3.2 UX原則（資料からの設計示唆）
- 「現在地と目標がその場でわかる」体験を最優先にする（“何が弱点で、何をやるべきか”をその日のうちに提示）
- “測定×理論×データ活用”が一体のプログラムであるため、PWA内も**講義 → 測定 → 実戦 → 疲労度チェック → 映像分析 → フィードバック**が迷いなく繋がる導線とする
- データ二次利用や企業連携を見据え、**同意・権限・監査**を初期から実装する

---

## 4. 業務フロー（As-Is / To-Be）

### 4.1 As-Is（想定）
- 受付: 紙/Excel、参加者にURL配布、出欠は口頭/紙
- 測定: 機器ごとに別アプリ、結果は後日CSV/PDF
- 講義: スライド投影のみ、資料は後で共有
- 実戦: 映像/GPSは別サービス、共有が煩雑
- フィードバック: 個別レポートを手作業で編集し、メール/LINEで送付

### 4.2 To-Be（本PWA導入後）
- 事前: 参加者はPWAで登録・同意・プロフィール入力（食事制限等も収集）
- 当日: QR/コードでチェックイン → タイムラインに沿って通知 → 講義資料/測定結果/試合データ/映像分析の導線が順次PWAに反映
- 終了後: 個人別フィードバックレポートが自動生成され、選手・指導者は権限に応じて閲覧/DL

### 4.3 1Dayタイムスケジュール（最新・1/18 PoC）
- 8:20 集合（着替えた状態）
- 8:30〜9:15 マインドフルネス講義（Upmind社）
- 9:15〜10:30 ウォーミングアップ＋フィジカル測定（並行実施）
  - 全体はウォーミングアップを実施し、呼ばれた選手が順次測定へ移動
  - Photon Sports: スプリント・アジリティ系指標
  - Hawkin Dynamics: ジャンプ・パワー系指標
- 10:30〜11:45 練習試合（35分×2本、AIカメラ自動撮影）
- 11:45〜12:00 試合後 疲労度チェック（主観/簡易指標）
- 12:00〜12:30 映像分析デモ（AIカメラ映像の簡易分析）
- 12:30〜13:00 会社説明会（第一生命、PoC/採用広報枠）

---

## 5. 機能要件（Functional Requirements）

> 記載形式: **FR-xxx**（必須度: Must/Should/Could）  
> 評価観点:「当日の運営が回るか」「選手が“次の一手”を理解できるか」「データ/同意が破綻しないか」

### 5.1 認証・アカウント
- **FR-001（Must）**: メール（マジックリンク）またはSMSによるログイン
- **FR-002（Must）**: ロール（選手/指導者/運営/管理者）による権限制御（RBAC）
- **FR-003（Should）**: 1イベント限定の“ゲスト参加”（当日配布コードで閲覧のみ）

### 5.2 イベント（合宿）管理
- **FR-010（Must）**: イベント作成（名称、日時、場所、タイムテーブル、参加枠、プログラム種別）
- **FR-011（Must）**: タイムテーブル表示（講義→測定→実戦→疲労度チェック→映像分析→レポート配布等。イベントごとに順序/時刻を設定し、任意セッションも追加可）
- **FR-012（Should）**: 会場案内（SETAGAYA Qs-GARDEN 等）の地図・導線・注意事項の表示
- **FR-013（Could）**: 雨天/変更時の一括通知と代替タイムテーブル切替
- **FR-014（Should）**: 合宿の利用シーン（新入部員加入時 / OFF明けのチェック / リーグ開幕前の選考）をテンプレとしてプリセット

### 5.3 参加者登録・同意・問診
- **FR-020（Must）**: 参加者情報登録（氏名、所属、ポジション、利き足、連絡先）
- **FR-021（Must）**: データ取扱い同意（同意文面の提示、同意チェック、同意日時の記録）
- **FR-022（Should）**: 体調/既往歴/怪我歴の事前アンケート（任意・項目は運営が編集可能）
- **FR-023（Should）**: 昼食（弁当）に関するアレルギー/食事制限の申告
- **FR-024（Could）**: 未成年の場合の保護者同意（署名・本人/保護者の関係性記録）

### 5.4 受付・出欠・グループ/順番管理
- **FR-030（Must）**: チェックイン（QR/数字コード/検索）と出欠管理
- **FR-031（Must）**: グルーピング（例: A/B/C、ポジション別等）と自動割当
- **FR-032（Must）**: 測定ステーション別の順番管理（呼出し・完了ステータス）
- **FR-033（Should）**: 当日スタッフ向け「全体進行ダッシュボード」（遅延検知、滞留数）
- **FR-034（Could）**: 呼出し表示（会場のモニタ表示用：簡易Webビュー）

### 5.5 測定: Photon Sports / Hawkin Dynamics
- **FR-040（Must）**: 測定セッションの作成・紐付け（イベント × ステーション × グループ）
- **FR-041（Must）**: 測定結果の取り込み
  - 方式A: ベンダーAPI連携（可能な場合）
  - 方式B: CSV/PDFアップロード（運営用）
  - 方式C: 主要KPIの手入力（当日暫定）
- **FR-042（Must）**: 選手の“当日KPIサマリー”表示（例：スピード/アジリティ/方向転換/減速、ジャンプ/パワー 等）
- **FR-043（Should）**: ベンチマーク表示（過去ベスト/チーム平均/12ヶ月等、提供可能な範囲で）
- **FR-044（Could）**: Photonの映像機能（240fps 等）へのディープリンク/埋め込み閲覧
- **FR-045（Should）**: “測定→改善”を繋ぐコメント欄（測定担当が1行で要点を残せる）

補足（連携前提の理解）  
- Photon Sports: モバイルシステム（短時間セットアップ）、即時フィードバック、ウェブアプリで高度分析、動画解析（バイオメカ）など  
- Hawkin Dynamics: フォースプレート等の測定がリアルタイムでモバイル表示、セキュアな「Hawkin Cloud」で分析、カスタムレポートテンプレート、API連携対応など  

### 5.6 講義・セルフコンディショニング
- **FR-050（Must）**: 講義コンテンツの配信（資料PDF/動画/リンク、マインドフルネス講義を含む）
- **FR-051（Must）**: 選択式プログラムの提示と受講トラック登録（栄養/睡眠/メンタル/セルフケア）
- **FR-052（Should）**: 簡易チェックリスト（セルフケア実践の記録、気づきメモ）
- **FR-053（Could）**: 理解度確認（クイズ）と“次の行動”の提示
- **FR-054（Could）**: “個別ルーティン”の保存（プロ選手の実体験共有に紐づくメモ機能）

### 5.7 実戦＋データ活用: PlayerData / 映像
- **FR-060（Must）**: 試合/紅白戦セッションの作成（対戦、時間、メンバー）
- **FR-061（Must）**: GPS等のパフォーマンス指標の取り込み（PlayerData）
- **FR-062（Should）**: “試合の振り返りテンプレ”提供（次回の課題、映像タイムスタンプメモ等）
- **FR-063（Could）**: AIカメラ/映像分析サービスへのリンク集約・クリップ共有

補足（連携前提の理解）  
- PlayerData: クラウドでのデータアクセス、リアルタイム閲覧（Connect）、選手がスマホからアクセス可能、走行距離/最高時速/スプリント/加減速/ワークロード/ヒートマップ等の指標、屋内外対応など  

### 5.8 個人別フィードバックレポート
- **FR-070（Must）**: 個人レポート自動生成（テンプレート + 当日KPI + コメント）
- **FR-071（Must）**: レポート配布（PWA内閲覧、PDFダウンロード、共有リンク）
- **FR-072（Should）**: コーチ向けチーム集計レポート（権限に応じて）
- **FR-073（Could）**: “次回までのアクションプラン”生成（運営が編集可能な推奨メニュー）
- **FR-074（Could）**: 「俺ならデータをこう使う！」（解説コンテンツ）をレポート内に差し込み

### 5.9 データ提供・エクスポート
- **FR-080（Must）**: 運営向けエクスポート（参加者リスト、出欠、測定サマリー、ログ）
- **FR-081（Should）**: 参加者本人向けデータDL（CSV/PDF）
- **FR-082（Could）**: 研究/二次利用向け匿名化エクスポート（同意条件に基づく）

### 5.10 連絡・通知
- **FR-090（Must）**: 当日通知（タイムライン、集合、遅延、呼出し）
- **FR-091（Should）**: PWA Push通知（対応端末のみ）
- **FR-092（Could）**: LINE連携/メール一斉送信（外部連携）

---

## 6. 画面要件（主要画面）

### 6.1 参加者（選手）向け
- S-01: ログイン/参加コード入力
- S-02: 当日タイムライン（現在のセッション、集合場所、持ち物）
- S-03: 測定結果サマリー
- S-04: 講義コンテンツ
- S-05: 実戦データ＋振り返りメモ
- S-06: 個人レポート（閲覧/DL）
- S-07: 同意/プロフィール編集

### 6.2 指導者向け
- C-01: チームダッシュボード（出欠、当日KPIの集計、選手リスト/伸長率/疲労フラグ/差分表示）
- C-02: 選手一覧（閲覧権限のある範囲）
- C-03: チームレポート（DL）

### 6.3 運営スタッフ向け
- A-01: イベント管理（作成/複製/公開）
- A-02: 受付・出欠（検索/QR）
- A-03: グループ/順番管理（ステーション別）
- A-04: データ取り込み（CSV/PDF/手入力）
- A-05: レポート生成/配布管理
- A-06: 監査ログ/エクスポート

---

## 7. データ要件

### 7.1 主なデータエンティティ（案）
- Event（合宿イベント）
- User（ログイン主体）
- ParticipantProfile（選手属性）
- Consent（同意）
- Session（測定/講義/実戦）
- Station（測定ステーション）
- Metric（KPI定義）
- MeasurementResult（結果）
- Report（個人/チームレポート）
- Content（講義資料）
- AuditLog（操作ログ）

### 7.2 データ保持・削除（ドラフト）
- 参加者の個人データ: 既定 1年（運用で変更可能）
- 測定サマリー: 既定 3年（研究・継続支援の可能性を踏まえ、同意ベースで）
- ログ: 既定 1年
- “二次利用”は同意粒度（目的別）で制御

---

## 8. 外部連携要件（インターフェース）

### 8.1 連携対象（想定）
- Photon Sports（測定/解析/動画）
- Hawkin Dynamics（フォースプレート/TruStrength、Hawkin Cloud、レポート/API）
- PlayerData（GPS/LPS、Connectリアルタイム、セッションレポート）
- AIカメラ/映像（例: NTT SPORTICT）
- ファイルストレージ（レポートPDF、CSV、外部動画リンク）

### 8.2 連携方式（原則）
- 可能であれば**API連携**（サーバ間、またはOAuth等）
- APIが難しい場合は**エクスポートファイル取り込み**（CSV/PDF）
- 連携不可の場合でも、最低限「外部アプリ/ウェブ」への**ディープリンク**で“迷子”を防ぐ

---

## 9. 非機能要件（Non-Functional Requirements）

### 9.1 パフォーマンス・可用性
- **NFR-001**: 主要画面初回表示 3秒以内（4G相当を想定）
- **NFR-002**: 当日ピーク同時接続（例: 100〜300人）で致命的な遅延がない
- **NFR-003**: 障害時も受付・タイムラインが見られる最低限のオフライン機能

### 9.2 オフライン/電波不安定対策（PWA特性）
- **NFR-010**: Service Worker による静的アセットキャッシュ
- **NFR-011**: 受付/出欠、順番管理、暫定手入力はオフラインでも記録し、復帰時に同期（競合解決ポリシーを定義）
- **NFR-012**: 画像/動画は原則オンライン（容量・権利の観点）

### 9.3 セキュリティ
- **NFR-020**: 通信のTLS必須
- **NFR-021**: ロール別アクセス制御、URL推測困難な共有リンク
- **NFR-022**: 監査ログ（誰がいつ何を見た/DLしたか）
- **NFR-023**: 重要データの暗号化（サーバ側、保管時）

### 9.4 プライバシー・コンプライアンス
- **NFR-030**: 個人情報保護（同意管理、目的外利用の抑止、匿名化オプション）
- **NFR-031**: “二次利用”を前提とする場合、同意文面・同意粒度（研究/製品改善/マーケ等）を分離
- **NFR-032**: データ提供先（指導者/企業）の範囲を設定できること

### 9.5 端末・互換性
- **NFR-040**: iOS Safari / Android Chrome / PC Chrome を最低サポート
- **NFR-041**: レスポンシブ（スマホ優先、運営はタブレット推奨）
- **NFR-042**: アクセシビリティ（WCAG 2.1 AA目標）

### 9.6 運用・保守
- **NFR-050**: イベント複製でテンプレ運用できる（毎回ゼロ作成を避ける）
- **NFR-051**: 標準レポートテンプレ管理（差し替え/バージョン管理）
- **NFR-052**: 監視（エラー監視、稼働監視）、バックアップ/リストア手順

### 9.7 技術スタック
- **NFR-060**: Next.js（App Router） + TypeScript + Tailwind CSS
- **NFR-061**: デプロイは Vercel（PWA対応、CDN配信を想定）

---

## 10. 受入基準（Acceptance Criteria）例

- 当日、参加者がPWAへアクセスし、**タイムライン**と**集合案内**を迷わず確認できる
- 運営が、参加者100名規模で**チェックイン/出欠**を滞りなく処理できる（平均1名あたり10秒以内目標）
- 少なくとも1種類の測定（例: Hawkin のジャンプ）について、**CSV取り込み→個人サマリー表示→PDFレポート反映**がエンドツーエンドで動作する
- 権限の異なるユーザーで、閲覧可能範囲が正しく分離される（選手は自分のみ、指導者は許諾された範囲、運営は全体）

---

## 11. MVP範囲（推奨）

### MVP（最小実用）
- 方針: 第一弾はMVPに注力し、**各デバイスからのCSV/JSON受領 → インポート → 画面表示**を最優先で実施する
- 実装ステップ（第一弾）
  - Step 1: 各デバイスからCSV/JSONでデータ受領（手動アップロードを許容）
  - Step 2: インポート処理（項目マッピング/バリデーション）
  - Step 3: 画面への反映（選手/チームの主要KPIサマリー）
- ログイン（マジックリンク）＋参加コード
- タイムライン
- 受付/出欠
- 測定結果: 手入力＋CSV取り込み（1機器から開始）
- 個人レポートPDF生成・配布
- 同意取得（目的別同意を将来拡張できる形で）

### Phase 2（拡張）
- Push通知、オフライン同期強化
- Photon/Hawkin/PlayerData のAPI連携
- 映像のクリップ共有、振り返りテンプレの高度化
- “SSVスコア（指数）”の算出（Movement/Power 等の統合指標）
- チーム/施設の常設ラボ化（Valley OS）のデータ基盤へ接続

---

## 12. 未確定事項・前提（要検討リスト）
- 各ベンダーのAPI仕様・認証方式・データ提供範囲
- 同意文面（法務レビュー）と同意粒度
- レポートのテンプレ構成（KPI一覧、コメント欄、ベンチマーク種別）
- 運営の実オペレーション（ステーション数、導線、同時処理人数）
- データ保持期間と削除要件（契約/利用規約との整合）

---

## 13. 参照資料
- プログラム・設備説明（STEP1）  
- Day1ワークシート（SSV構想・ペルソナ/課題・ビジネスモデル）  
- Photon Sports（JP）資料  
- Hawkin Dynamics（Japan 2025）資料  
- PlayerData（JP）資料  
